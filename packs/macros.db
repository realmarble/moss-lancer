{"name":"Briefing Controller","type":"script","scope":"global","author":"T1xCGKr6LBRAAzAn","img":"systems/lancer/assets/icons/save.svg","command":"briefcontroller()","ownership":{"default":0,"T1xCGKr6LBRAAzAn":3},"flags":{"core":{"sourceId":"Macro.tTZ91N0wzwJBruyR"}},"_stats":{"systemId":"lancer","systemVersion":"1.6.1","coreVersion":"10.303","createdTime":1698948516827,"modifiedTime":1699051381229,"lastModifiedBy":"T1xCGKr6LBRAAzAn"},"folder":null,"sort":0,"_id":"58mPDniEb8GKi47t"}
{"name":"Announcement Controller","type":"script","scope":"global","author":"T1xCGKr6LBRAAzAn","img":"systems/lancer/assets/icons/trait.svg","command":"AnnouncementController()","ownership":{"default":0,"T1xCGKr6LBRAAzAn":3},"flags":{"core":{"sourceId":"Macro.4ssD4oR6rTZgJkgq"}},"_stats":{"systemId":"lancer","systemVersion":"1.6.1","coreVersion":"10.303","createdTime":1699295997924,"modifiedTime":1699296827346,"lastModifiedBy":"T1xCGKr6LBRAAzAn"},"folder":null,"sort":0,"_id":"f4Za7STCcvo1tMue"}
{"name":"Announcement Editor","type":"script","scope":"global","author":"T1xCGKr6LBRAAzAn","img":"systems/lancer/assets/icons/npc_feature.svg","command":"announcementeditor()","ownership":{"default":0,"T1xCGKr6LBRAAzAn":3},"flags":{"core":{"sourceId":"Macro.Z8ZZKaOkeSY2gM7G"}},"_stats":{"systemId":"lancer","systemVersion":"1.6.1","coreVersion":"10.303","createdTime":1699708475392,"modifiedTime":1699896048562,"lastModifiedBy":"T1xCGKr6LBRAAzAn"},"folder":null,"sort":0,"_id":"hCni0EVG7UpCT1tW"}
{"name":"Console","type":"script","scope":"global","author":"T1xCGKr6LBRAAzAn","img":"systems/lancer/assets/icons/tech_full.svg","command":"function loadXterm() {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = \"https://cdn.jsdelivr.net/npm/xterm@4.19.0/lib/xterm.js\";\n    script.onload = resolve;\n    script.onerror = reject;\n    document.head.appendChild(script);\n\n    const link = document.createElement('link');\n    link.rel = \"stylesheet\";\n    link.href = \"https://cdn.jsdelivr.net/npm/xterm@4.19.0/css/xterm.css\";\n    document.head.appendChild(link);\n  });\n}\n\nloadXterm().then(() => {\n  let d = new Dialog({\n    title: \"Console\",\n    content: `\n    <div id=\"container\" style=\"height: 400px; width: 400px;\"><div id=\"terminal\" style=\"height: 400px; width: 90%\"></div></div>\n    `,\n    buttons: {},\n    default: \"two\",\n    render: html => {\n      curline=\"\"\n      let messages = [];\n      if (!window.term) {\n        window.term = new Terminal({\n          cursorBlink: true,\n          allowProposedApi: true,\n          fontFamily: '\"Cascadia Code\", Menlo, monospace',\n          theme:{foreground: '#F8F8F8', background: '#2D2E2C', selection: '#5DA5D533', black: '#1E1E1D', brightBlack: '#262625', red: '#CE5C5C', brightRed: '#FF7272', green: '#5BCC5B', brightGreen: '#72FF72', yellow: '#CCCC5B', brightYellow: '#FFFF72', blue: '#5D5DD3', brightBlue: '#7279FF', magenta: '#BC5ED1', brightMagenta: '#E572FF', cyan: '#5DA5D5', brightCyan: '#72F0FF', white: '#F8F8F8', brightWhite: '#FFFFFF'}\n        });\n        window.term.RefreshWrite = function (text){messages.push(text);redrawTerminal();}\n        window.term.Refresh = function (){redrawTerminal();}\n        window.term.Write = function (text){messages.push(text);}\n        window.term.open(document.getElementById('terminal'));\n        window.term.write(\"COMPANION/CONCIERGE UNIT INITIALIZING\"+'\\r\\n')\n        messages.push(\"COMPANION/CONCIERGE UNIT INITIALIZING\");\n        window.term.write(\"GMS COMP/CON Unit Mk XI Rev 11.4.1c\"+'\\r\\n')\n        messages.push(\"GMS COMP/CON Unit Mk XI Rev 11.4.1c\");\n        window.term.write(\"5017.3.12 General Massive Systems // Please Operate Responsibly\"+'\\r\\n')\n        messages.push(\"5017.3.12 General Massive Systems // Please Operate Responsibly\");\n        window.term.write(`\\x1b[33m[Logged in as ${game.users.current.name}]\\x1b[0m\\r\\n`);\n        messages.push(`\\x1b[33m[Logged in as ${game.users.current.name}]\\x1b[0m\\r\\n`);\n        game.socket.emit('system.lancer', {message:`\\x1b[33m[${game.users.current.name}] Joined the Room.\\x1b[0m `,TYPE:\"CHAT\"});\n        game.socket.on('system.lancer', (msg) => {\n          if (msg.TYPE != \"CHAT\") {\n          return; \n          }\n          messages.push(msg.message);\n          redrawTerminal();\n        });\n        window.term.onKey((e) => {\n          const ev = e.domEvent;\n          const printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;\n\n          // Backspace\n          if (ev.keyCode === 8) {\n            if (curline.length > 0) {\n              curline = curline.slice(0, -1);\n              redrawTerminal();\n            }\n          }\n          // Left arrow\n          else if (ev.keyCode === 37) {\n            // Move the cursor to the left or prevent moving it beyond the start of current line\n          }\n          // Right arrow\n          else if (ev.keyCode === 39) {\n            // Move the cursor to the right or prevent moving it beyond the end of current line\n          }\n          // Enter\n          else if (ev.keyCode === 13) {\n            if (curline.trim() != \"\") {\n              game.socket.emit('system.lancer', {message:`\\x1b[33m[${game.users.current.name}] :\\x1b[0m ` + curline,TYPE:\"CHAT\"});\n              messages.push(`\\x1b[33m[${game.users.current.name}] :\\x1b[0m ` + curline);\n              curline = \"\";\n              redrawTerminal();\n            }\n          }\n          // Printable characters\n          else if (printable) {\n            curline += e.key;\n            redrawTerminal();\n          }\n        });\n\n        function redrawTerminal() {\n          window.term.reset();\n          messages.forEach(msg => window.term.write(msg + '\\r\\n'));\n          window.term.write(`\\x1b[33m[${game.users.current.name}] :\\x1b[0m ` + curline);\n        }\n      }\n    },\n    close: html => {\n      if (window.term) {\n        window.term.dispose();\n        game.socket.emit('system.lancer', {message:`\\x1b[33m[${game.users.current.name}] Has Left the Room.\\x1b[0m `,TYPE:\"CHAT\"});\n        game.socket.off('system.lancer');\n        window.term = null;\n      }\n    }\n  }, {width:660, height:485});\n\n  d.render(true);\n}).catch(error => {\n  console.error(\"Failed to load xterm:\", error);\n});","ownership":{"default":0,"T1xCGKr6LBRAAzAn":3},"flags":{"core":{"sourceId":"Macro.Rlp8NqxkrAAWYsUk"}},"_stats":{"systemId":"lancer","systemVersion":"1.6.1","coreVersion":"10.303","createdTime":1699895878707,"modifiedTime":1699896047018,"lastModifiedBy":"T1xCGKr6LBRAAzAn"},"folder":null,"sort":0,"_id":"y0pbkMd3U7uzXsVZ"}
{"name":"Briefing Editor","type":"script","scope":"global","author":"T1xCGKr6LBRAAzAn","img":"systems/lancer/assets/icons/npc_feature.svg","command":"briefingeditor()","flags":{"exportSource":{"world":"lancer","system":"lancer","coreVersion":"10.303","systemVersion":"1.6.1"}},"_stats":{"systemId":"lancer","systemVersion":"1.6.1","coreVersion":"10.303","createdTime":1699708475392,"modifiedTime":1699896040320,"lastModifiedBy":"T1xCGKr6LBRAAzAn"}}